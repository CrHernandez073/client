<div style="margin: 0px 30px 0px 15px;" class="text-center">
	<ngb-alert *ngIf="visible==true" (close)="cerrar_alert()" type="{{tipo}}">{{mensaje}}</ngb-alert>
	<ngb-progressbar type="{{tipo_progress}}" animated="true" showValue="true" striped="true" value="{{porcentaje_actual}}" *ngIf="mostrar_progress == true"></ngb-progressbar>
</div>

<form [formGroup] = "form_guardar" (ngSubmit)="press_guardar()">
	<div class="row" *ngIf="agregar_o_modificar=='nuevo'">
		<div class="col-12 text-center" style="color: #00AAE7;">
			<small id="passwordHelpInline" class="text-center">
				El número de miembro se generará al completar formulario
			</small>
		</div>
	</div>
	<div class="row">
		<!-- CÁMARA -->
		<div class="col-2 text-center" style="padding-right: 0px;">
			<div class="col-12" style="margin: 30px 0px 0px 0px;"> 
				<img [src]="foto" style="width: 100%" 	class=" border border-primary rounded img-fluid"/>
			</div>
			<div class="col-12"  style="margin: 5px 0px 0px 0px;">
				<button type="button" class="btn btn-club btn-sm" data-toggle="modal" data-target="#modal_foto" style="width:100%;" (click)="toggleWebcam();" >Abrir cámara
				</button>
			</div>
		</div>
<!-- ESTADO, VISA, RELIGION, TALLA, F.INSCR, NOMBRES, APPAT, APMAT.
	F.NAC, EDAD, LUG. NAC, NACIONALIDAD, SEXO-->
	<div class="col-10" style="margin: 15px 0px 0px 0px; padding-left: 0px;">
		<div class="col-12 custom-control-inline">
			<div class="col-3 form-group input-group-sm mb-3" style="font-size: 14px;">
				<label for="sede" style="padding: 0px;">Sede</label>
				<select formControlName="sede" class="custom-select" id="sede"
				[ngClass]="{ 'is-invalid': form_invalid && f2.sede.errors }" 
				data-toggle="tooltip" data-placement="top" title="Elige" style="margin-top: -10px;">
				<option selected disabled></option>
				<option value="Loma Dorada">Loma Dorada</option>
				<option value="Camino Verde">Camino Verde</option>
				<option value="Natura">Natura</option>
			</select>
		</div>

		<div class="col-2 form-group input-group-sm mb-3" style="font-size: 14px; margin: 0px 0px 0px -20px;">
			<label for="turno_asiste" style="padding: 0px;">Turno</label>
			<select formControlName="turno_asiste" class="custom-select" id="turno_asiste"
			[ngClass]="{ 'is-invalid': form_invalid && f2.turno_asiste.errors }" 
			data-toggle="tooltip" data-placement="top" title="Elige" style="margin-top: -10px;">
			<option selected disabled></option>
			<option value="Matutino">Matutino</option>
			<option value="Vespertino">Vespertino</option>
		</select>
	</div>

	<div class="col-1 custom-control custom-checkbox" style="margin: 0px 0px 0px 10px;">
		<input type="checkbox" id="estado" formControlName="estado" class="custom-control-input" [ngClass]="{ 'is-invalid': form_invalid && f2.estado.errors}"/>
		<label class="custom-control-label" for="estado">Estado&nbsp;</label>
	</div>

	<div class="col-1 custom-control custom-checkbox" style="margin: 0px 0px 0px 10px;">
		<input type="checkbox" id="visa" formControlName="visa" class="custom-control-input" [ngClass]="{ 'is-invalid': form_invalid && f2.visa.errors}"/>
		<label class="custom-control-label" for="visa">Visa</label>
	</div>


	<div class="col-2 input-group input-group-sm mb-3" style="font-size: 14px;">
		<label for="tallacamisa" style="padding: 0px;">Talla de camisa</label>
		<select formControlName="tallacamisa" class="custom-select" id="tallacamisa"
		[ngClass]="{ 'is-invalid': form_invalid && f2.tallacamisa.errors }" 
		data-toggle="tooltip" data-placement="top" title="Elige" style="margin-top: -10px;">
		<option selected disabled></option>
		<option value="XS">XS</option>
		<option value="S">S</option>
		<option value="M">M</option>
		<option value="L">L</option>
		<option value="XL">XL</option>
		<option value="XXL">XXL</option>
	</select>
</div>
<div class="col-3 form-group input-group-sm mb-3" >
	<label for="fechainscripcion" style="padding: 0px; font-size: 13px;">Fecha de inscripción</label>
	<input formControlName="fechainscripcion" placeholder="Fecha de inscripción" type="date" class="form-control"  [ngClass]="{ 'is-invalid': form_invalid && f2.fechainscripcion.errors }" id="fechainscripcion" data-toggle="tooltip" data-placement="top" title="Fecha de inscripción" style="margin-top: -10px;">
</div>
</div>
<div class="col-12 custom-control-inline">
	<div class="col-3 input-group input-group-sm mb-3" hidden="true">
		<input type="text" formControlName="idNinosDG" class="form-control" [ngClass]="{ 'is-invalid': form_invalid && f2.idNinosDG.errors}" readonly/>
	</div>
	<div class="col-2 input-group input-group-sm mb-3" hidden="true">
		<input type="number" formControlName="miembroID" class="form-control" placeholder="No. Miembro" [ngClass]="{ 'is-invalid': form_invalid && f2.miembroID.errors }" readonly/>
	</div>
	<div class="col-3 form-group input-group-sm mb-3">
		<label for="curp" style="padding: 0px; font-size: 13px;">CURP</label>
		<input type="text" id="curp" formControlName="curp" class="form-control" [ngClass]="{ 'is-invalid': form_invalid && f2.curp.errors }" style="margin-top: -10px; text-transform:uppercase;" autocomplete="off"/>
	</div>
	<div class="col-2 form-group input-group-sm mb-3 ">
		<label for="nombres" style="padding: 0px; font-size: 13px;">Nombre(s)</label>
		<input type="text" id="nombres" formControlName="nombres" class="form-control" [ngClass]="{ 'is-invalid': form_invalid && f2.nombres.errors }" style="margin-top: -10px; text-transform:capitalize;" autocomplete="off" />
	</div>
	<div class="col-2 form-group input-group-sm mb-3">
		<label for="appaterno" style="padding: 0px; font-size: 14px;">Apellido Paterno</label>
		<input type="text" id="appaterno" formControlName="appaterno" class="form-control"
		[ngClass]="{ 'is-invalid': form_invalid && f2.appaterno.errors }"style="margin-top: -10px; text-transform:capitalize;" autocomplete="off">
	</div>
	<div class="col-2 form-group input-group-sm mb-3">
		<label for="apmaterno" style="padding: 0px; font-size: 14px;">Apellido Materno</label>
		<input type="text" id="apmaterno" formControlName="apmaterno" class="form-control"
		[ngClass]="{ 'is-invalid': form_invalid && f2.apmaterno.errors }"style="margin-top: -10px; text-transform:capitalize;" autocomplete="off">
	</div>
	<div class="col-3 form-group input-group-sm mb-3" >
		<label for="fechanacimiento" style="padding: 0px; font-size: 13px;">Fecha de nacimiento</label>
		<input formControlName="fechanacimiento" placeholder="Fecha de inscripción" type="date" class="form-control"  [ngClass]="{ 'is-invalid': form_invalid && f2.fechanacimiento.errors }" id="fechanacimiento" data-toggle="tooltip" data-placement="top" title="Fecha de nacimiento" style="margin-top: -10px;" (change)="calcular_edad($event)">
	</div>
</div>
<div class="col-12 custom-control-inline">
	<div class="col-2 form-group input-group-sm mb-3">
		<label for="edad" style="padding: 0px; font-size: 14px;">Edad</label>
		<input type="number" id="edad" formControlName="edad" class="form-control"
		[ngClass]="{ 'is-invalid': form_invalid && f2.edad.errors }"style="margin-top: -10px;" min="4" max="18" readonly="true">
	</div>
	<div class="col-4 form-group input-group-sm mb-3">
		<label for="lugarnacimiento" style="padding: 0px; font-size: 14px;">Lugar de nacimiento</label>
		<input type="text" id="lugarnacimiento" formControlName="lugarnacimiento" class="form-control"
		[ngClass]="{ 'is-invalid': form_invalid && f2.lugarnacimiento.errors }"style="margin-top: -10px; text-transform:capitalize;" autocomplete="off">
	</div>

	<div class="col-2 form-group input-group-sm mb-3" style="font-size: 14px;">
		<label for="nacionalidad" style="padding: 0px;">Nacionalidad</label>
		<select formControlName="nacionalidad" class="custom-select" id="nacionalidad"
		[ngClass]="{ 'is-invalid': form_invalid && f2.nacionalidad.errors }" 
		data-toggle="tooltip" data-placement="top" title="Elige" style="margin-top: -10px;">
		<option selected disabled></option>
		<option value="Mexicano">Mexicano</option>
		<option value="Extranjero">Extranjero</option>
	</select>
</div>
<div class="col-2 form-group input-group-sm mb-3" style="font-size: 14px;">
	<label for="sexo" style="padding: 0px;">Sexo</label>
	<select formControlName="sexo" class="custom-select" id="sexo"
	[ngClass]="{ 'is-invalid': form_invalid && f2.sexo.errors }" 
	data-toggle="tooltip" data-placement="top" title="Elige" style="margin-top: -10px;">
	<option selected disabled></option>
	<option value="M">Masculino</option>
	<option value="F">Femenino</option>
</select>
</div>
<div class="col-2 form-group input-group-sm mb-3">
	<label for="religion" style="padding: 0px; font-size: 14px;">Religión</label>
	<input type="text" id="religion" formControlName="religion" class="form-control" [ngClass]="{ 'is-invalid': form_invalid && f2.religion.errors }" style="margin-top: -10px; text-transform:capitalize;" autocomplete="off"/>
</div>
</div>
</div>
</div>

<!-- INICIO DE COL 12 DERECHOHABIENCIA -->
<div class="dropdown-divider"></div>
<div class="row" style="margin: 10px 0px 0px 0px">
	<div class="col-12 font-weight-bold" >
		<span>DERECHOHABIENCIA</span>
	</div>
	
	<div class="col-3 form-group input-group-sm mb-3" style="font-size: 14px;">
		<label for="derechohabiencia" style="padding: 0px;">Tipo de derechohabiencia</label>
		<select formControlName="derechohabiencia" class="custom-select" id="derechohabiencia"
		[ngClass]="{ 'is-invalid': form_invalid && f2.derechohabiencia.errors }" 
		data-toggle="tooltip" data-placement="top" title="Elige" style="margin-top: -10px;">
		<option selected disabled></option>
		<option value="IMSS">IMSS</option>
		<option value="ISSSTE">ISSSTE</option>
		<option value="ISSSTECALI">ISSSTECALI</option>
		<option value="POPULAR">SEGURO POPULAR</option>
		<option value="PARTICULAR">PARTICULAR</option>
		<option value="OTRO">OTRO</option>
	</select>
</div>
<div class="col-2 form-group input-group-sm mb-3">
	<label for="otroseguro" style="padding: 0px; font-size: 14px;">Otro servicio</label>
	<input type="text" id="otroseguro" formControlName="otroseguro" class="form-control"
	[ngClass]="{ 'is-invalid': form_invalid && f2.otroseguro.errors }" style="margin-top: -10px;">
</div>
<div class="col-7 custom-control-inline" style="margin: 0px 0px 0px -15px">
	<div class="col-8 form-group input-group-sm mb-3">
		<label for="vivecon" style="padding: 0px; font-size: 14px;">Con quién vive el niño (a) adolecente</label>
		<input type="text" id="vivecon" formControlName="vivecon" class="form-control"
		[ngClass]="{ 'is-invalid': form_invalid && f2.vivecon.errors }" placeholder="" style="margin-top: -10px;">
	</div>
	<div class="col-4 form-group input-group-sm mb-3">
		<label for="telefono" style="padding: 0px; font-size: 14px;">Teléfono</label>
		<input type="tel" id="telefono" formControlName="telefono" class="form-control"
		[ngClass]="{ 'is-invalid': form_invalid && f2.telefono.errors }" placeholder="" style="margin-top: -10px;">
	</div>
</div>
</div>

<!-- INICIO DE COL 12 DOMICILIO -->
<div class="dropdown-divider"></div>
<div class="row" style="margin: 10px 0px 0px 0px">
	<div class="col-12 font-weight-bold" >
		<span>DOMICILIO</span>
	</div>
	<div class="col-12 custom-control-inline" style="margin: 0px 0px 0px -15px">
		<div class="col-3 form-group input-group-sm mb-3">
			<label for="domcalle" style="padding: 0px; font-size: 14px;">Calle y número</label>
			<input type="text" id="domcalle" formControlName="domcalle" class="form-control"
			[ngClass]="{ 'is-invalid': form_invalid && f2.domcalle.errors }" placeholder="" style="margin-top: -10px;  text-transform:capitalize;" autocomplete="off"/>
		</div>
		<div class="col-3 form-group input-group-sm mb-3">
			<label for="domcolonia" style="padding: 0px; font-size: 14px;">Colonia</label>
			<input type="text" id="domcolonia" formControlName="domcolonia" class="form-control"
			[ngClass]="{ 'is-invalid': form_invalid && f2.domcolonia.errors }" placeholder="" style="margin-top: -10px;  text-transform:capitalize;" autocomplete="off"/>
		</div>
		<div class="col-2 form-group input-group-sm mb-3">
			<label for="domcodpost" style="padding: 0px; font-size: 14px;">C.P</label>
			<input type="number" id="domcodpost" formControlName="domcodpost" class="form-control"
			[ngClass]="{ 'is-invalid': form_invalid && f2.domcodpost.errors }" placeholder="" style="margin-top: -10px;  text-transform:capitalize;" autocomplete="off"/>
		</div>
		<div class="col-2 form-group input-group-sm mb-3">
			<label for="domdelegacion" style="padding: 0px; font-size: 14px;">Delegación</label>
			<input type="text" id="domdelegacion" formControlName="domdelegacion" class="form-control"
			[ngClass]="{ 'is-invalid': form_invalid && f2.domdelegacion.errors }" placeholder="" style="margin-top: -10px;  text-transform:capitalize;" autocomplete="off"/>
		</div>
		<div class="col-2 form-group input-group-sm mb-3">
			<label for="dommunicipio" style="padding: 0px; font-size: 14px;">Municipio</label>
			<input type="text" id="dommunicipio" formControlName="dommunicipio" class="form-control"
			[ngClass]="{ 'is-invalid': form_invalid && f2.dommunicipio.errors }" placeholder="" style="margin-top: -10px;  text-transform:capitalize;" autocomplete="off"/>
		</div>
	</div>
</div>	

<!-- INICIO DE COL 12 ESCOLARES y PERSONAS AUTORIZADAS -->
<div class="dropdown-divider"></div>
<div class="row" style="margin: 0px 0px 0px 0px">
	<div class="col-6">
		<div class="col-12 font-weight-bold" >
			<span>DATOS ESCOLARES</span>
		</div>
		<div class="col-12 custom-control-inline" style="margin: 0px 0px 0px -15px">
			<div class="col-8 form-group input-group-sm mb-3">
				<label for="escuela" style="font-size: 14px;">Nombre de la escuela</label>
				<input type="text" id="escuela" formControlName="escuela" class="form-control"
				[ngClass]="{ 'is-invalid': form_invalid && f2.escuela.errors }" placeholder="" style="margin-top: -10px; text-transform:capitalize;" autocomplete="off">
			</div>
			<div class="col-4 form-group input-group-sm mb-3" style="font-size: 14px;">
				<label for="escuelaturno">Turno escolar</label>
				<select formControlName="escuelaturno" class="custom-select" id="escuelaturno"
				[ngClass]="{ 'is-invalid': form_invalid && f2.escuelaturno.errors }" 
				data-toggle="tooltip" data-placement="top" title="Elige" style="margin-top: -10px;">
				<option selected disabled></option>
				<option value="Matutino">Matutino</option>
				<option value="Intermedio">Intermedio</option>
				<option value="Vespertino">Vespertino</option>
			</select>
		</div>
	</div>
</div>
<div class="col-6">
	<div class="col-12 font-weight-bold" >
		<span>PERSONAS AUTORIZADAS A RECOGERLO</span>
	</div>
	<div class="col-12 custom-control-inline">
		<div class="col-6 form-group input-group-sm mb-3">
			<label for="recoge1nino" style="font-size: 14px;">Nombre</label>
			<input type="text" id="recoge1nino" formControlName="recoge1nino" class="form-control"
			[ngClass]="{ 'is-invalid': form_invalid && f2.recoge1nino.errors }" placeholder="" style="margin-top: -10px; text-transform:capitalize;" autocomplete="off">
		</div>
		<div class="col-6 form-group input-group-sm mb-3">
			<label for="parentrecoge1" style="font-size: 14px;">Parentesco</label>
			<input type="text" id="parentrecoge1" formControlName="parentrecoge1" class="form-control"
			[ngClass]="{ 'is-invalid': form_invalid && f2.parentrecoge1.errors }" placeholder="" style="margin-top: -10px; text-transform:capitalize;" autocomplete="off">
		</div>
	</div>
</div>
</div>

<!-- INICIO DE COL 12 ESCOLARES y PERSONAS AUTORIZADAS -->
<div class="dropdown-divider"></div>
<div class="row" style="margin: 0px 0px 0px -5px">
	<div class="col-10" style="margin: 0px 0px 15px -5px">
		<div class="col-12 font-weight-bold" >
			<span>CONTACTOS DE EMERGENCIA</span>
		</div>
		<div class=" col-12 input-group">
			<div class="input-group-prepend">
				<span class="input-group-text">Contacto 1</span>
			</div>
			<input type="text" formControlName="emergencia1" class="form-control" placeholder="Nombre" [ngClass]="{ 'is-invalid': form_invalid && f2.emergencia1.errors }" style=" text-transform:capitalize;" autocomplete="off"/>
			<input type="text" formControlName="parentemergencia1" class="form-control" placeholder="Parentesco" [ngClass]="{ 'is-invalid': form_invalid && f2.parentemergencia1.errors }" style=" text-transform:capitalize;" autocomplete="off"/>
			<input type="tel" formControlName="telefonoemergencia1" class="form-control" placeholder="Teléfono" [ngClass]="{ 'is-invalid': form_invalid && f2.telefonoemergencia1.errors }" autocomplete="off"/>
		</div>
		<div class=" col-12 input-group">
			<div class="input-group-prepend">
				<span class="input-group-text">Contacto 2</span>
			</div>
			<input type="text" formControlName="emergencia2" class="form-control" placeholder="Nombre" [ngClass]="{ 'is-invalid': form_invalid && f2.emergencia2.errors }" style=" text-transform:capitalize;" autocomplete="off"/>
			<input type="text" formControlName="parentemergencia2" class="form-control" placeholder="Parentesco" [ngClass]="{ 'is-invalid': form_invalid && f2.parentemergencia2.errors }" style=" text-transform:capitalize;" autocomplete="off"/>
			<input type="tel" formControlName="telefonoemergencia2" class="form-control" placeholder="Teléfono" [ngClass]="{ 'is-invalid': form_invalid && f2.telefonoemergencia2.errors }" autocomplete="off"/>
		</div>
		<div class=" col-12 input-group">
			<div class="input-group-prepend">
				<span class="input-group-text">Contacto 3</span>
			</div>
			<input type="text" formControlName="emergencia3" class="form-control" placeholder="Nombre" [ngClass]="{ 'is-invalid': form_invalid && f2.emergencia3.errors }" style=" text-transform:capitalize;" autocomplete="off"/>
			<input type="text" formControlName="parentemergencia3" class="form-control" placeholder="Parentesco" [ngClass]="{ 'is-invalid': form_invalid && f2.parentemergencia3.errors }" style=" text-transform:capitalize;" autocomplete="off"/>
			<input type="tel" formControlName="telefonoemergencia3" class="form-control" placeholder="Teléfono" [ngClass]="{ 'is-invalid': form_invalid && f2.telefonoemergencia3.errors }" autocomplete="off"/>
		</div>
	</div>
	<div class="col-2 text-right">
		<button name="DG_btn_guardar"  class="btn btn-club btn-sm" style="width:100%; margin-top: 50px; height: 50px;" type="submit">
			<span id="spinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true" hidden></span>
			Guardar
		</button>
	</div> 
</div>	
</form>

<!-- Modal -->
<div class="modal fade" id="modal_foto" tabindex="-1" role="dialog" aria-labelledby="modal_fotoLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="modal_fotoLabel">Cámara</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="toggleWebcam();">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<webcam [height]="350" [width]="460" [trigger]="triggerObservable" (imageCapture)="handleImage($event)" *ngIf="showWebcam"
				[allowCameraSwitch]="allowCameraSwitch" [switchCamera]="nextWebcamObservable"
				[videoOptions]="videoOptions"
				[imageQuality]="1"
				(cameraSwitched)="cameraWasSwitched($event)"
				(initError)="handleInitError($event)"
				></webcam>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="toggleWebcam();">Cancelar</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal" (click)="tomar_foto();">Tomar foto</button>
			</div>
		</div>
	</div>
</div>

<!-- Modal para dar bienvenida -->
<button id="btn_modal_miembroID" [hidden]="true" data-toggle="modal" data-target="#modal_miembroID">Open Modal</button>
<div class="modal fade" id="modal_miembroID" tabindex="-1" role="dialog" aria-labelledby="modal_miembroIDLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h3 class="modal-title" id="modal_miembroIDLabel">BIENVENIDO {{f2.nombres.value | uppercase }} </h3>
			</div>
			<div class="modal-body">
				<h5>Tu número de miembro es <mark><ins> {{f2.miembroID.value}} </ins></mark></h5>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
			</div>
		</div>
	</div>
</div>

<!-- Modal de información -->
<button id="btn_modal_info" [hidden]="agregar_o_modificar != 'nuevo'" type="button" class="btn btn-danger flotante" data-toggle="modal" data-target="#modal_info" >AYUDA</button>
<div class="modal fade" id="modal_info" tabindex="-1" role="dialog" aria-labelledby="modal_infoLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content" style="text-align: center;">
			<div class="modal-header">
				<h2 class="modal-title  w-100" id="modal_infoLabel" style="color: red;">IMPORTANTE</h2>
			</div>
			<div class="modal-body" style="text-align: justify;">
				<h5>Usted está creando un nuevo miembro, para ello <ins style="color: red"> sólo deberá agregar información en el apartado de 'DATOS GENERALES'</ins>, una vez completado este paso usted deberá seleccionar la opción MODIFICAR y deberá ingresar el número de miembro que se generó al finalizar datos generales, apartir de ahí usted podrá agregar la información faltante en los demás apartados.</h5>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-info" data-dismiss="modal">Entendido</button>
			</div>
		</div>
	</div>
</div>
<!-- <span>el siguiente número de miembro es: <mark>{{miembros[miembros.length -1].miembroID + 1}}</mark></span>
<li *ngFor="let miembro of miembros">
{{ miembro.estado}}
</li> -->
